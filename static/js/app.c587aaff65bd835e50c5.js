webpackJsonp([1],{"/I/3":function(t,e){},"8DDX":function(t,e){},NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("7+uW"),i={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"header"},[e("div",{staticClass:"inner-container"},[e("div",{staticClass:"container"},[e("router-link",{attrs:{to:"/"}},[e("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[e("use",{attrs:{"xlink:href":"#n-cnode"}})])]),this._v(" "),this._m(0)],1)])])},staticRenderFns:[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ul",[a("li",[a("a",{attrs:{href:"#"}},[t._v("首页")])]),t._v(" "),a("li",[a("a",[t._v("新手入门")])]),t._v(" "),a("li",[a("a",[t._v("API")])]),t._v(" "),a("li",[a("a",[t._v("关于")])]),t._v(" "),a("li",[a("a",[t._v("注册")])]),t._v(" "),a("li",[a("a",[t._v("登陆")])])])}]};var n={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"footer"},[e("div",{staticClass:"inner-container"},[e("p",[e("span",[this._v("RSS")]),this._v(" "),e("span",[e("a",{attrs:{href:"https://github.com/quietdw/CNode"}},[this._v("源码地址")])])]),this._v(" "),e("p",[this._v("CNode 社区为国内最专业的 Node.js 开源技术社区，致力于 Node.js 的技术研究。")])])])}]};var r={name:"App",components:{Header:a("VU/8")({name:"Header",data:function(){return{}}},i,!1,function(t){a("8DDX")},"data-v-7fd4e575",null).exports,Footer:a("VU/8")({name:"Footer",data:function(){return{}}},n,!1,function(t){a("wQHh")},"data-v-899c2072",null).exports}},o={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("Header"),this._v(" "),e("div",{staticClass:"main"},[e("el-container",[e("el-main",[e("router-view",{attrs:{name:"main"}})],1),this._v(" "),e("el-aside",{attrs:{width:"290px"}},[e("router-view",{attrs:{name:"slidebar"}})],1)],1)],1),this._v(" "),e("Footer")],1)},staticRenderFns:[]};var c=a("VU/8")(r,o,!1,function(t){a("eqoC")},null,null).exports,l=a("/ocq"),u=a("pFYg"),v=a.n(u),_=a("7t+N"),d=a.n(_),p={name:"Pagenation",data:function(){return{pages:[1,2,3,4,5,"…"],currentpage:1}},props:["current"],methods:{onClick:function(t){if("object"===(void 0===t?"undefined":v()(t))){var e=t.target.getAttribute("button-data"),a=d()(".pagenation .selected");switch(e){case"previous":a.prev().click();break;case"next":a.next().click();break;default:return}}else{if("number"!=typeof t)return;this.currentpage=t,4===this.pages.indexOf(t)&&(this.pages.shift(),this.pages.splice(4,0,t+1)),0===this.pages.indexOf(t)&&t>1&&(this.pages.unshift(t-1),this.pages.splice(4,1))}this.$emit("current-change",this.currentpage)}},created:function(){this.currentpage=this.current,this.currentpage>5&&(this.pages=[this.currentpage-3,this.currentpage-2,this.currentpage-1,this.currentpage,this.currentpage+1])}},h={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"pagenation"},[a("ul",{attrs:{onselectstart:"return false;"}},[a("li",{attrs:{"button-data":"previous"},on:{click:t.onClick}},[t._v("«")]),t._v(" "),this.pages[0]>1?a("li",[t._v("…")]):t._e(),t._v(" "),t._l(t.pages,function(e,s){return a("li",{key:s,class:[{selected:e===t.currentpage},{dot:"string"==typeof e}],on:{click:function(a){return t.onClick(e)}}},[t._v(t._s(e))])}),t._v(" "),a("li",{attrs:{"button-data":"next"},on:{click:t.onClick}},[t._v("»")])],2)])},staticRenderFns:[]};var f={name:"PostList",data:function(){return{isLoading:!0,lists:[],page:1}},methods:{onCurrentChange:function(t){this.page=t,this.getData()},getData:function(){var t=this;this.request("/topics","get",{limit:20,page:this.page}).then(function(e){t.lists=e,t.isLoading=!1,t.$router.push({path:"/",query:{page:t.page}})})}},components:{pagenation:a("VU/8")(p,h,!1,function(t){a("WTQC")},"data-v-272bdfc2",null).exports},beforeMount:function(){this.page=parseInt(this.$route.query.page,10)||"",console.log(this.page),this.getData()}},g={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"post-list"},[t.isLoading?a("div",{staticClass:"loading"},[a("div"),t._v(" "),a("div"),t._v(" "),a("div")]):a("div",{staticClass:"lists"},[a("div",{staticClass:"list-header"},[a("a",{class:{"current-tab":!0},attrs:{href:"#"}},[t._v("全部")]),t._v(" "),a("a",[t._v("精华")]),t._v(" "),a("a",[t._v("分享")]),t._v(" "),a("a",[t._v("问答")]),t._v(" "),a("a",[t._v("招聘")]),t._v(" "),a("a",[t._v("客户端测试")])]),t._v(" "),a("div",{staticClass:"list-container"},[a("ul",t._l(t.lists,function(e){return a("li",{key:e.id},[a("img",{attrs:{src:e.author.avatar_url,alt:e.author.loginname}}),t._v(" "),a("span",{staticClass:"replay-count"},[a("span",[t._v(t._s(e.reply_count))]),t._v("\n            /\n            "),a("span",[t._v(t._s(e.visit_count))])]),t._v(" "),a("span",{staticClass:"tag",class:{top:e.top,good:e.good}},[t._v(t._s(t._f("newTag")(t.friendlyTag(e.tab),e)))]),t._v(" "),a("span",{staticClass:"title"},[a("router-link",{attrs:{to:{name:"topic",params:{id:e.id,loginname:e.author.loginname}}}},[t._v(t._s(e.title))])],1),t._v(" "),a("span",{staticClass:"last-replay"},[t._v(t._s(t.friendlyDate(e.last_reply_at)))])])}),0)]),t._v(" "),a("pagenation",{attrs:{current:t.page},on:{"current-change":t.onCurrentChange}})],1)])},staticRenderFns:[]};var m=a("VU/8")(f,g,!1,function(t){a("/I/3")},"data-v-c2be8ad2",null).exports,C={name:"Article",data:function(){return{isLoading:!0,post:null,replies:[]}},methods:{getData:function(t){var e=this;this.request("/topic/"+t,"GET").then(function(t){e.post=t,e.replies=t.replies,e.isLoading=!1}).catch(function(t){console.log(t)})}},beforeRouteUpdate:function(t,e,a){this.isLoading=!0,this.getData(t.params.id),a()},beforeMount:function(){this.getData(this.$route.params.id)}},D={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"article"},[t.isLoading?a("div",{staticClass:"loading"},[a("div"),t._v(" "),a("div"),t._v(" "),a("div")]):a("div",{staticClass:"container"},[a("div",{staticClass:"main"},[a("div",{staticClass:"header"},[a("h1",[t.post.top||t.post.good?a("span",[t._v(t._s(t._f("newTag")(t.friendlyTag(t.post.tab),t.post)))]):t._e(),t._v("\n          "+t._s(t.post.title)+"\n        ")]),t._v(" "),a("ul",[a("li",[t._v("发布于 "+t._s(t.friendlyDate(t.post.create_at)))]),t._v(" "),a("li",[t._v("作者 "+t._s(t.post.author.loginname))]),t._v(" "),a("li",[t._v(t._s(t.post.visit_count)+" 次浏览")]),t._v(" "),a("li",[t._v("来自 "+t._s(t.friendlyTag(t.post.tab)))])])]),t._v(" "),a("div",{staticClass:"content",domProps:{innerHTML:t._s(t.post.content)}})]),t._v(" "),a("div",{staticClass:"comments"},[a("div",{staticClass:"header"},[a("span",[t._v(t._s(t.replies.length))]),t._v("回复\n      ")]),t._v(" "),t._l(t.replies,function(e,s){return a("div",{key:e.id,staticClass:"comment"},[a("div",{staticClass:"avatar"},[a("img",{attrs:{src:e.author.avatar_url,alt:e.author.loginname}})]),t._v(" "),a("div",{staticClass:"comment-container"},[a("div",{staticClass:"comment-info"},[a("span",[a("router-link",{attrs:{to:{name:"user",params:{loginname:e.author.loginname}}}},[t._v(t._s(e.author.loginname))])],1),t._v(" "),a("a",[t._v(t._s(s+1)+"楼·"+t._s(t.friendlyDate(e.create_at)))])]),t._v(" "),a("div",{staticClass:"comment-content",domProps:{innerHTML:t._s(e.content)}})])])})],2)])])},staticRenderFns:[]};var y=a("VU/8")(C,D,!1,function(t){a("UjTc")},"data-v-67fa356a",null).exports,b={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"silde-bar"},[t.isloading?a("div",{staticClass:"loading"},[a("div"),t._v(" "),a("div"),t._v(" "),a("div")]):t._e(),t._v(" "),t.isloading?t._e():a("section",{staticClass:"info"},[a("div",{staticClass:"navigate"},[t._v("作者")]),t._v(" "),a("div",{staticClass:"info-container"},[a("div",{staticClass:"avatar"},[a("img",{attrs:{src:t.userData.avatar_url,alt:""}}),t._v(" "),a("span",[a("router-link",{attrs:{to:{name:"user"}}},[t._v(t._s(t.userData.loginname))])],1)]),t._v(" "),a("p",[t._v(t._s(t.userData.score)+"积分")]),t._v(" "),a("a",{attrs:{href:""}},[t._v(t._s(t.topicCollect)+"个话题收藏")]),t._v(" "),a("div",{staticClass:"social"},[a("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[a("use",{attrs:{"xlink:href":"#n-github"}})]),t._v(" "),a("a",{attrs:{href:"https://github.com/"+t.userData.githubUsername}},[t._v("@"+t._s(t.userData.githubUsername))])]),t._v(" "),a("p",{staticClass:"registerDate"},[t._v("注册时间"+t._s(t.friendlyDate(t.userData.create_at))+"前")])])]),t._v(" "),!t.isloading&&t.userData.recent_topics.length>0?a("section",{staticClass:"recent-topics"},[a("div",{staticClass:"lists"},[a("div",{staticClass:"list-header"},[t._v("最近创建的话题")]),t._v(" "),a("div",{staticClass:"list-container"},[a("ul",t._l(t.userData.recent_topics,function(e){return a("li",{key:e.id},[a("span",{staticClass:"title"},[a("router-link",{attrs:{to:{name:"topic",params:{id:e.id}}}},[t._v(t._s(e.title))])],1)])}),0)])])]):t._e(),t._v(" "),!t.isloading&&t.userData.recent_replies.length>0?a("section",{staticClass:"recent-replies"},[a("div",{staticClass:"lists"},[a("div",{staticClass:"list-header"},[t._v("最近回复的话题")]),t._v(" "),a("div",{staticClass:"list-container"},[a("ul",t._l(t.userData.recent_replies,function(e){return a("li",{key:e.id},[a("span",{staticClass:"title"},[a("router-link",{attrs:{to:{name:"topic",params:{id:e.id}}}},[t._v(t._s(e.title))])],1)])}),0)])])]):t._e()])},staticRenderFns:[]};var k=a("VU/8")({name:"UserInfo",data:function(){return{userData:null,isloading:!0,topicCollect:""}},watch:{$route:function(t,e){this.isLoading=!0,this.getData()}},methods:{limitTo5:function(){this.userData.recent_topics.length>5&&this.userData.recent_topics.splice(5),this.userData.recent_topics.length>5&&this.userData.recent_topics.splice(5)},getData:function(){var t=this;this.request("user/"+this.$route.params.loginname).then(function(e){t.userData=e,t.limitTo5(),t.isloading=!1}),this.request("topic_collect/"+this.$route.params.loginname).then(function(e){t.topicCollect=e.length})}},beforeMount:function(){this.getData()}},b,!1,function(t){a("jDxi")},"data-v-4a66bed5",null).exports,T=a("//Fk"),w=a.n(T),x={name:"UserInfo",data:function(){return{userData:null,isloading:!0,topicCollect:""}},methods:{limitTo5:function(){this.userData.recent_topics.length>5&&this.userData.recent_topics.splice(5),this.userData.recent_topics.length>5&&this.userData.recent_topics.splice(5)},getCount:function(t,e){var a=this;return w.a.all(e.map(function(s,i){return a.request("topic/"+s.id).then(function(a){return e[i].reply_count=a.reply_count,e[i].visit_count=a.visit_count,t})}))}},beforeMount:function(){var t=this;this.request("user/"+this.$route.params.loginname).then(function(e){var a=t.getCount(e,e.recent_replies),s=t.getCount(e,e.recent_topics);w.a.all([a,s]).then(function(e){t.userData=e[0][0],t.limitTo5(),t.isloading=!1})}),this.request("topic_collect/"+this.$route.params.loginname).then(function(e){t.topicCollect=e.length})}},$={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"user-info"},[t.isloading?a("div",{staticClass:"loading"},[a("div"),t._v(" "),a("div"),t._v(" "),a("div")]):t._e(),t._v(" "),t.isloading?t._e():a("section",{staticClass:"info"},[a("div",{staticClass:"navigate"},[a("router-link",{attrs:{to:"/"}},[t._v("主页")]),t._v(" "),a("span",[t._v("/")])],1),t._v(" "),a("div",{staticClass:"info-container"},[a("div",{staticClass:"avatar"},[a("img",{attrs:{src:t.userData.avatar_url,alt:""}}),t._v(" "),a("span",[t._v(t._s(t.userData.loginname))])]),t._v(" "),a("p",[t._v(t._s(t.userData.score)+"积分")]),t._v(" "),a("a",{attrs:{href:""}},[t._v(t._s(t.topicCollect)+"个话题收藏")]),t._v(" "),a("div",{staticClass:"social"},[a("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[a("use",{attrs:{"xlink:href":"#n-github"}})]),t._v(" "),a("a",{attrs:{href:"https://github.com/"+t.userData.githubUsername}},[t._v("@"+t._s(t.userData.githubUsername))])]),t._v(" "),a("p",{staticClass:"registerDate"},[t._v("注册时间"+t._s(t.friendlyDate(t.userData.create_at))+"前")])])]),t._v(" "),!t.isloading&&t.userData.recent_topics.length>0?a("section",{staticClass:"recent-topics"},[a("div",{staticClass:"lists"},[a("div",{staticClass:"list-header"},[t._v("最近创建的话题")]),t._v(" "),a("div",{staticClass:"list-container"},[a("ul",t._l(t.userData.recent_topics,function(e){return a("li",{key:e.id},[a("img",{attrs:{src:e.author.avatar_url,alt:e.author.loginname}}),t._v(" "),a("span",{staticClass:"replay-count"},[a("span",[t._v(t._s(e.reply_count))]),t._v("\n              /\n              "),a("span",[t._v(t._s(e.visit_count))])]),t._v(" "),a("span",{staticClass:"title"},[a("router-link",{attrs:{to:{name:"topic",params:{id:e.id}}}},[t._v(t._s(e.title))])],1),t._v(" "),a("span",{staticClass:"last-replay"},[t._v(t._s(t.friendlyDate(e.last_reply_at)))])])}),0)])])]):t._e(),t._v(" "),!t.isloading&&t.userData.recent_replies.length>0?a("section",{staticClass:"recent-replies"},[a("div",{staticClass:"lists"},[a("div",{staticClass:"list-header"},[t._v("最近回复的话题")]),t._v(" "),a("div",{staticClass:"list-container"},[a("ul",t._l(t.userData.recent_replies,function(e){return a("li",{key:e.id},[a("img",{attrs:{src:e.author.avatar_url,alt:e.author.loginname}}),t._v(" "),a("span",{staticClass:"replay-count"},[a("span",[t._v(t._s(e.reply_count))]),t._v("\n              /\n              "),a("span",[t._v(t._s(e.visit_count))])]),t._v(" "),a("span",{staticClass:"title"},[a("router-link",{attrs:{to:{name:"topic",params:{id:e.id}}}},[t._v(t._s(e.title))])],1),t._v(" "),a("span",{staticClass:"last-replay"},[t._v(t._s(t.friendlyDate(e.last_reply_at)))])])}),0)])])]):t._e()])},staticRenderFns:[]};var U=a("VU/8")(x,$,!1,function(t){a("iGjn")},"data-v-16400946",null).exports;s.default.use(l.a);var L=new l.a({routes:[{name:"topic",path:"/topic/:id&:loginname",components:{main:y,slidebar:k}},{name:"index",path:"/",components:{main:m}},{name:"user",path:"/user/:loginname",components:{main:U,slidebar:k}}]}),q=a("mtWM"),M=a.n(q);function j(t){var e="object"===(void 0===t?"undefined":v()(t))?t:new Date(t),a="",s=((new Date).getTime()-e.getTime())/1e3;return s<=30?a="刚刚":s<=60&&s>30?a=Math.ceil(s)+"秒前":s<=3600&&s>60?a=Math.ceil(s/60)+"分钟前":s<=86400&&s>3600?a=Math.ceil(s/3600)+"小时前":s<=2592e3&&s>86400?a=Math.ceil(s/86400)+"天前":s<=31104e3&&s>2592e3?a=Math.ceil(s/2592e3)+"月前":s>31104e3&&(a=Math.ceil(s/31104e3)+"年前"),a}function F(t){var e="";return"share"===t?e="分享":"ask"===t?e="问答":"job"===t?e="招聘":"good"===t&&(e="精华"),e}M.a.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded",M.a.defaults.baseURL="https://cnodejs.org/api/v1",M.a.defaults.withCredentials=!1;var R={install:function(t,e){t.prototype.friendlyDate=j,t.prototype.friendlyTag=F}},E=a("zL8q"),H=a.n(E);a("tvR6");s.default.config.productionTip=!1,s.default.prototype.request=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new w.a(function(s,i){var n={url:t,method:e};"get"===e.toLocaleLowerCase()?n.params=a:n.data=a,M()(n).then(function(t){"ok"===t.statusText.toLocaleLowerCase()?s(t.data.data):i(t)}).catch(function(t){i(t)})})},s.default.filter("newTag",function(t,e){return e.top?"置顶":e.good?"精华":t}),s.default.use(R),s.default.use(H.a),new s.default({el:"#app",router:L,render:function(t){return t(c)},components:{App:c},template:"<App/>"})},UjTc:function(t,e){},WTQC:function(t,e){},eqoC:function(t,e){},iGjn:function(t,e){},jDxi:function(t,e){},tvR6:function(t,e){},wQHh:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.c587aaff65bd835e50c5.js.map